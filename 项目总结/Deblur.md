

###  问题    
- 问题一  
  - 问题 ：输出图像有棋盘效应，这种情况多是由上采样部分造成。  
  - 解决方法：通过resize插值法加conv，代替反卷积，解决了棋盘效应。  

模糊效果：对于整体部分的去模糊效果不错，结构部分恢复不错，但对于高频的细节部分恢复很差，如人脸等去模糊效果很差。


接下来的方向：
现实监控下的数据去模糊：两类数据，一类监控摄像头，一类考勤人脸数据，看下效果。
  

改进对于细节部分的恢复和加强。



### 记录：  
数据为两帧相加取平均帧获得模糊数据，因此blur和sharp数据不是像素级的对应。  
- 数据可以分为：1. 摄像头固定：背景物无运动模糊，目标物体不同速度的非均匀运动模糊。 2. 手持摄像头：背景物有运动模糊，目标物体也有相对的不同运动速度的非均匀模糊。  

- 方法：由于输入数据和label的像素不是对应的，我们生成去模糊数据时也不要求与sharp数据进行像素点的一一对应，只要恢复出其中内容就好（没必要做到所有像素一一对应）。  由此没法使用输出和label的MSE/MAE作为损失进行约束。故用GAN网络的对抗损失，和VGG的感知损失作为内容损失，两者结合作为损失。  

- 目前存在问题： 整体图像，低频部分，简单的高频部分如轮廓恢复效果可以。但图中小patch的复杂的高频部分，如人脸恢复的不好。 需要解决的问题：图中小patch内的复杂高频信息恢复。  

- 解决方向：
	- 可以缩小patchGAN判别器中patch大小，使网络更集中网络中小patch部分的细节部分。 但这样做存在一个问题：由于存在像素不对应的问题，当patch过小时，比较的就是像素点之间的差异了，效果会很差。  
	- 生成网络中加入多尺度信息，多尺度融合恢复小patch的问题。
	- 可以输出vgg不同卷积层的输出作为loss约束，因为不同卷积层代表不同的感受野，而每个卷积层输出的feature map的点对应的是全图的一个patch的特征，计算损失就是计算每个patch的特征损失。不同卷积层输出计算损失就可以对多尺度的patch进行计算loss，从而达到多尺度patch-loss的计算。
	- 生成网络下采样和上采样加入skip-connet，保留输入中的细节信息。在两次下采样和上采样中分别加入一层卷积，保重下采样的平滑。  
	- 可以考虑加入注意力机制，因为图中出现了直线弯曲，这种现象的出现就是由于感受野不够大。
	- 使用堆叠网络，先在下采样的低分辨图片上生成，再经过高分辨生成网络，多任务损失优化网络。这样既达到了堆叠网络的效果，也起到了多尺度效果。
- 需要补充知识 ：  
  1. SE block
  2. biggan，替换生成器网络
  3. pixHD,高清图片生成
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTM2ODIyMzQzMCwyMTI1NzQ4MzE5LDEyNz
Y4MjIxOTAsMTk0MDA0MDgzMywxMzk0MTk0MzkxLDEyNDI2MTQ3
ODksLTU1NjQyNjMxOSw3NjIxNzY0NzEsLTk0NzMyNjQ3OV19
-->